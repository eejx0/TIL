# Virtual DOM

<aside>
📌

실제 **DOM**을 **JS 객체 형태로 복제**한 가벼운 사본

</aside>

- 웹 애플리케이션의 성능을 최적화하기 위해 등장
- **React**의 핵심 개념

**상태 변경**이 발생할 때마다 전체 UI를 Virtual DOM에 반영하고 **이전 상태와 비교**해 필요한 부분에 한해 **최소한의 DOM 업데이트**를 수행 🫢

→ 비교할 땐 실제 돔을 조작하지 않고 메모리 상에서 업데이트와 비교가 이뤄져 가볍고 빠르게 수행됌

## React에서 Virtual DOM이 활용되는 과정

- **상태 변경**: 컴포넌트의 상태나 props가 변경되면 Virtual DOM이 다시 생성됌
- **재조정(Reconciliation)**: 비교 알고리즘을 이용해 새로운 Virtual DOM과 이전 Virtual DOM간 차이 계산
- **re-render**: 계산된 차이에 따라 실제 DOM에서 필요한 부분만 업데이트

## React는 비교 알고리즘을 어떻게 효율화 했을까

<aside>
💡

O(n³) 복잡도를 가질 수 있는 트리 비교 문제를 **휴리스틱**으로 O(n)으로 최적화

</aside>

휴리스틱 알고리즘은 완벽하지 않아도 현실적으로 충분히 좋은 답을 빨리 찾는 방법 🤔

### 휴리스틱 알고리즘의 가정

<aside>
📌

**서로 다른 타입**의 두 요소는 **서로 다른 트리**를 만들어낸다

- <div> → <span>의 경우 비교를 수행하지 않고 해당 요소와 그 자식들을 모두 새로 생성함
- 자식 요소들의 내용이 같더라도 이전의 트리를 모두 버리고 완전히 새로 만듦
- 비효율적으로 보일 수 있지만 실제 앱에서 타입이 다른 경우 이 가정이 대부분 효율적
</aside>

<aside>
📌

**key prop**으로 여러 렌더링 사이에서 **어떤 자식 엘리먼트가 변경되지 않아야 할지 표시**해줄 수 있음

- 같은 레벨의 자식들을 비교할 때 개발자가 입력한 key prop을 사용해 요소 식별
- 리스트 내역의 일부가 수정됐을 때 모든 요소들을 갱신하지 않고 변경된 요소만 감지
</aside>
