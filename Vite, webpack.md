# Vite, Webpack
## 번들러

---

> 여러개의 파일들을 **하나의 파일로 묶어두는 도구**
> 

초기에는 간단한 스크립트 파일 몇개만 이용해 서비스가 가능했지만 사이트가 커지고 수요가 많아질 수록 관리가 어려워져 웹사이트 전처리의 요구사항이 많아지게 되었고 이를 자동화 해줄 것들이 필요

→ 번들러 등장

## Webpack

---

![entry 포인트를 시작으로 의존적인 모듈을 전부 찾아내 하나의 파일로 번들링](attachment:2086407f-881d-4af4-bf5a-2300bd72d7c1:image.png)

entry 포인트를 시작으로 의존적인 모듈을 전부 찾아내 하나의 파일로 번들링

### 장점

<aside>
🗣

**간편한 설정**

---

- 하나의 설정 파일에서 entry와 output을 설정할 수 있음
- 어떤 plugin과 loader로 파일을 다룰 건지 명시되어 있음
- 확인하는 방법
    
    > test 프로젝트 생성 후 webpack.config.js 확인하면됨
    > 
    
    `npm run eject` → 숨겨졌던 webpack.config.js가 생성되고 webpack.config.js에서 entry와 output 설정을 확인할 수 있음
    
- entry, output
    
    **entry**: webpack은 번들링 과정에서 진입점인 entry point 생성
    entry point는 보통 src/index.js로 하고 이걸 기준으로 의존적인 모듈들을 찾아서 하나의 묶음으로 번들링
    
    **output**: webpack.config.js에서 진입점과 묶어진 번들들이 생성될 output 설정 가능
    해당 파일에서 plugin, loader도 다루고 있어 하나의 파일에서 간편하게 설정 가능
    
</aside>

<aside>
🗣

**plugin, loader**

---

- webpack은 2012년 처음나왔고 vite는 2021년에 등장
- 더 오랜시간 사용된 만큼 다양한 plugin, loader 사용 가능
- loader로 파일들을 변환, 번들링, 빌드를 진행하고 plugin으로 output 파일을 튜닝
- 필요에 따라 다양한 plugin, loader가 오픈소스에서 개발되고 있음
</aside>

<aside>
🗣

**Code Splitting**

---

- 간단하게 애플리케이션에서 필요하지 않는 부분들을 따로 분할해 별도의 번들로 만드는 기술
- 분할된 번들은 필요할 때만 로딩되므로 초기 로딩 속도를 향상시키고 사용자 경험 향상시킴
</aside>

### Rollup

- **Webpack**
    - 의존성 그래프를 생성하고 이를 기반으로 모든 모듈을 하나의 번들로 묶음
    - 모든 모듈을 평가하고 모든 종속성을 해결한 후에 번들을 생성하는 방식
- **Rollup**
    - ES6 모듈을 사용해 코드를 분석하고 하나의 파일로 번들링
    - Tree-shaking같은 최적화 기능으로 번들 크기 최소화

## Vite

---

### esbuild

> 다른 번들러가 내부적인 JS 기반으로 번들링하는 것과 다르게 **GO 언어를 기반으로 번들링** → 기존보다 빠름
> 

설정이 유연하지 못하고 안정성 이슈 때문에 정식이 Release되지 못함

→ 이런 esbuild의 단점을 보완시킨 번들러가 Vite

### 장점

<aside>
🗣

**빠른 속도**

---

- esbuild로 번들링을 해 빠른 속도의 번들링 제공
- ES 모듈을 기반으로 하는 개발 서버 제공
- 실제로 파일을 번들링하는게 아닌 각각 모듈을 개별적으로 서빙하는 방식으로 동작해 변경된 모듈만 다시 번들링하므로 개발 서버의 속도 빠름
- HMR로 변경된 모듈만 실시간으로 업데이트
</aside>

## 차이점

---

### 개발 서버

- **Webpack**: 소스 코드와 모든 종속 관계의 모듈을 번들링 한 후 서버가 준비됨
- **Vite**: esbuild로 미리 번들링한 모듈을 필요할 때 동적으로 가져오기 때문에 즉각적으로 서버 구동됨

### 프로덕션 빌드

- **Webpack**: 각 모듈을 범위마다 함수로 맵핑해 결합
- **Vite**: 하나의 파일에 모든 종속 모듈을 전역 범위로 선언해 결합
